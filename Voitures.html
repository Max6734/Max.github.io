<script>
    // Sélection et bouton infos voitures
    const voitures = document.querySelectorAll('.voiture');
    const btn = document.getElementById('voirInfoBtn');
    let selected = null;
    voitures.forEach(voiture => {
        voiture.addEventListener('click', () => {
            voitures.forEach(v => v.classList.remove('selected'));
            voiture.classList.add('selected');
            btn.disabled = false;
            btn.classList.add('active');
            selected = voiture;
        });
    });
    btn.addEventListener('click', () => {
        if (selected) {
            let carParam = '';
            switch (selected.alt) {
                case "Peugeot 208":
                    carParam = 'peugeot';
                    break;
                case "Renault Clio":
                    carParam = 'renault';
                    break;
                case "BMW M4":
                    carParam = 'bmw';
                    break;
                case "Obsidian Seraph X":
                    carParam = 'rose';
                    break;
            }
            if (carParam) {
                window.location.href = `autrepage.html?car=${carParam}`;
            }
        }
    });

    // === Comparateur de voitures ===
    const voituresData = [
        {
            nom: "Peugeot 208",
            puissance: "130 ch",
            annee: 2022,
            prix: "23 000 €"
        },
        {
            nom: "Renault Clio",
            puissance: "100 ch",
            annee: 2021,
            prix: "19 500 €"
        },
        {
            nom: "BMW M4 Competition",
            puissance: "510 ch",
            annee: 2016,
            prix: "85 000 €"
        },
        {
            nom: "Obsidian Seraph X",
            puissance: "250 ch",
            annee: 2023,
            prix: "120 000 €"
        }
    ];

    const car1Select = document.getElementById("car1-select");
    const car2Select = document.getElementById("car2-select");

    function populateSelectComparateur(select) {
        voituresData.forEach((car, index) => {
            const option = document.createElement("option");
            option.value = index;
            option.textContent = car.nom;
            select.appendChild(option);
        });
    }

    function displayCarInfoComparateur(index, elementId) {
        const container = document.getElementById(elementId);
        if (index === "" || index === null) {
            container.innerHTML = "";
            return;
        }
        const car = voituresData[index];
        container.innerHTML = `
            <h3>${car.nom}</h3>
            <p><strong>Puissance :</strong> ${car.puissance}</p>
            <p><strong>Année :</strong> ${car.annee}</p>
            <p><strong>Prix :</strong> ${car.prix}</p>
        `;
    }

    if (car1Select && car2Select) {
        car1Select.addEventListener("change", () => {
            displayCarInfoComparateur(car1Select.value, "car1-info");
        });
        car2Select.addEventListener("change", () => {
            displayCarInfoComparateur(car2Select.value, "car2-info");
        });

        populateSelectComparateur(car1Select);
        populateSelectComparateur(car2Select);
    }
</script>
